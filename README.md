# CS50 Final Project

## Space Game

#### For this Project I have set some goals in mind before starting, as developement went along some of these changes or got removed from the todo list. I feel however my game mets requirements for complexity and distinctiveness from the previous games in the course so far. I used trello to help me organise and plan todo lists, here is a list of all items I have completed. Also I feel its important to state I used Unity version 2020.3.29f1 to make this project instead of the 2018 verison from the previous projects.

#### - Ship Controller - Start Menu - Asteroid Behaviour - Shooting Rockets - Rocket Behaviour - Lock on Feature - Basic UI for Lock on Feature - Enemy AI - Level Generator - End/Score Screen - UI Arrows Pointing at off Screen Enemies - Controller support (unaware if buttons on UI will work with a controller) - Ship Booster Particle effect - Health System - Pause Menu - Start Menu Ship Animations - Start Options Menu - Dynamic Music - Powerups
#### There may be more features I've forgotten to include, with these listed features alone I feel this is sufficiently complex enough for the assignment. I have heavily commented throughout all my scripts to explain the code directly, so if I fail to explain the features here clearly then I'd suggest you take a closer look at the code for futher details. Below I will attempt to defend the complexity of my code, focusing on certain features of note. First a General outline of what I wanted and have successfully made the game to be.


## The Game

#### It has a basic enough 3 scene system, a Start Menu where you can Go to a Options Menu to input what kind of level you want along with your ships color. A Play Scene for of course playing the game, this takes the Params set by the Options Menu/the default params and generates the given number of Asteroids and Enemies randomly placed within and on the outside of the level size. the Goal being to Destroy all the enemies, Once the Player does this the game will go to the next scene. GameOverWin, this is the highscore scene and on entering saves the new score the player just got. It doesn't have a score as its instead sorted by 1 how many enemies you had to defend and 2 how fast you did it. this isn't perfect as it doesn't account for level size but I feel it was good enough for sorting the scores, plus its all on display for those curious about how they did given the params they set. After this all the params are still saved and the player is taken back to the Start Menu. I almost forgot I also of course have a Pause Menu so at anytime the player can go back to the Start Menu or quit during play.


### Scripts

#### All scripts made by me can be found in the Scripts folder within the assets.

### Ship Controller

#### This is the first part of the game I worked on, I initially didn't know where to start so I looked up what some other people have done for their spaceship controller. I found [this video](https://www.youtube.com/watch?v=J6QR4KzNeJU&t=1376s) which helped me a lot getting started, I did change the movement code to suit my game in the controller (example I don't change rotation based on mouse's on screen position) and as my game keep developing I added more and more features. As it stands the controller itself is a monolithic script with no kinds of different states really as I felt this was not necessary, unless you count the many bools it uses to do actions such as its targeting systems. I feel like I did get quite into the weeds with this one, this was necessary I feel because of the features I wanted in the game. the controller has the functions MusicState, for changing a list of associated bools to be later used on a music selection script to select what music to play. The Already mentioned MovementInput function, clearly needed to the player can move. Multiple functions for the Targeting system as only one wouldn't have worked as I didn't want the player to lock on instantly, this is why it also uses coroutines for time delays. PowerupOn, a function to be called with the player interacts with a powerup and checks what kind it is before then apply the associated effect to the player. TakeDamage, for when the player has been hit by an enemie rocket, simply reduces the players health and checks if the player has 0 health, if so then goes to the next function. GameOver, spawns a empty game object where the ship was and applies an audio listener to it before destroying the ship object, this is because I put the audio listener inside the ship so you could here around it instead of the camera. As well as many IEnumerator functions for timings such as HitCoolDown to give the player some time before being able to take damage again and ReloadShot to prevent the player from spamming rockets. if you want to take a look, the code is ShipController.cs.


### Enemy AI

#### I didn't know if I was comfortable making this originally so this was just a "maybe I'll try out doing it" feature, I'm very gald I tried because I had most of my fun creating this project here. it was very satisfying watching the enemies fly around and attack the player within the scene view as if they were dancing. I had to fine tune a tweak a lot to get them to work exactly how I wanted, I'm very happy with the end result. Like the ShipController it is also a monolithic script, however it has what functions as a state machine (in my view) like code. It has 3 main functions that control it. AttackBehaviour, which checks a bunch of params I decided to use and changes a series of bools according to what "state" its in, this is why I think this is somewhat state machine like as you'll see in the next function. Movement, based apon the bools set in AttackBehaviour this will change its movement mode in terms of its direction and rotation/turning speed, an example would be if its in the fly away "state" it will start slowly turning away from the player. PointAtSelf, now I'm going to come straight out here and admit this was not a function made by me, I did have to modify it sightly to get it to work with my goals but the video for it can be found [here](https://www.youtube.com/watch?v=gAQpR1GN0Os), the reason this code was not made by me was due to the complexity of it. Simply put I was very out of my depth with such a math heavy (for me) problem, I had tried but couldn't get it to work in my own attempts. The game really needed this feature because the player would not be about to find the enemies if they were off screen/too far away so I went ahead and used this code. Other functions are ones such as LookTowards, a function used by Movement to prevent the same code being writen too much, as how I determin rotation is for the most part very similiar. PickRandomDirection, for when the player isn't in range it would choose a random rotation every 4 seconds to slowly transition towards to give the feeling it was being driven. ChasePlayerTimer, this is so the ship attempts to keep flying away if the player chases them, I felt it was to easy to shoot the enemies if they stopped and tried to turn back in the middle of being followed. TurnBack, so that the enemies don't leave the level radius, to ensure the enemies successfully turn back it allows their turn speed to stay high as they turn towards the middle of the level for 7 seconds. The rest being Timers for things like ShootCoolDown to prevent spamming the player with rockets. The script is EnemyAI.cs.

### Dynamic Music


#### I added music as one of the last things before touching up and finishing the game with things like the start and end screens. I had trouble finding music I wanted to use so I decided "Oh well, I'll just make some", now my music is nothing fancy as I'm very unexperienced with music production but as I was making it I realised that if I have full control of the music then I could make it dynamic! So thats what I did, I made a bunch of different verions of the music and controlled which plays using a MusicController script. I had a few issues I encounted while making this all come together (and to be honest its still not perfect), but I'm proud of the technically aspect of what I've done here. I use the BPM of the music in the update function so whenever it transitions it sounds less clippy. the basic gist is that all the music is constantly playing and all the clips are the same length (except the win theme), this way I can take bools generated by other scripts in the game and adjust the volume levels of each verion of the music. it also will pitch everything down if in the pause menu, an idea from Brackeys. at the end if the player has won by destroying all the enemies, it will wait for the current bit of music to end and then play the win theme, this prevents it from suddenly clipping out. the script is MusicController.cs


### Lock On Feature

#### I knew I wanted this feature so the player could have a reliable way of shooting at targets with the rocket, how it works is a bit spread across a few scripts, how it works is when the player has rendered Asteroids around the middle of the screen (space shown with a small UI box Element) it starts a coroutine (in order to make it seem like the ship is calculating targets and to help the player better aim at exactly what they want to lock on too) that waits a few seconds before again checking if any possible targets are in range. If there are then it chooses the closest one/any enemy (this is prevent frustration in case the player is trying to lock onto an enemie by an asteroid is closer to them) and opens up the box size showing the limits of the lock on space on screen, if it goes out it will start the process again. Now comes the rocket part, now the enemies also have lock on rockets however they only shoot the player within given params so they also have the player as a target. With the player, whatever target they have locked onto will be applied to the rocket's script, this will make the rocket turn to face the target as it moves forwards. I also made it so the speed of the rocket slows down as it keeps turning, this makes it somewhat possible to do fly around to prevent yourself being hit by an incoming rocket. Once the rocket gets within a certain distance from the target, it will cast out a ray from its front, if this ray fails to hit the target it then loses the target and flys straight foward pasted it. This was needed as the rocket would just spin around the target until it collided often times and looked pretty silly. If the player does not have a target, the spawn rocket will simply fly in the straight line out from the front of the ship. Rockets either destroy the gameObject they collide with or in the case of the player, check if they have a shield or not and if not then make the player take damage. the script for the rocket is RocketBehaviour.cs.


### Asteroid Behaviour and Powerups

#### Because the game can have a lot of Asteroids and I wanted them to be physics objects when they're collided with I made them not have rigid bodies until then. I don't know if this really saved on performace much but I figured it was better then not trying to optimise at all. Another thing Asteroids do is check if they're rendering or not, this puts them on a list of objects that could be locked onto by the player, part of the Lock On Feature just talked about. Asteroids can also be randomly spawned as a powerup Asteroid, to show this to the player I made my own ShaderGraph to have glowing red noise move across the texture of the model. I found [this](https://www.youtube.com/watch?v=nDsTBk6eano&t=8s) video very helpful on understanding how to make my own kinds of ShaderGraph's on my own. Once these Asteroids are Destroyed they will randomly drop either a shield or health Powerup, the first spawning a shield around the player, preventing them from taking damage while its up and the later reseting the players health back to its max. These help the game keep going as without these, given enough enemies the player would be overwhelmed and defeated very easily. The scripts for Powerups and Asteroids are PowerUp.cs and AsteroidBehaviour.cs respectively.


## Final Details

#### These have been the main things I wanted to talk about here as I feel they are the parts that really make the game what it is, of course there are many more scripts and smaller features to the game and if you want to see more I welcome you to check out the scripts within the Scripts folder. Now though I'd like to move onto credits of those I haven't already mentioned for the things I couldn't of made myself.

### Credits

#### - The Unity Team, for enabling me to make a game like this with such a flexible game engine! - Brackeys, him and his team were mentioned by Colten a few times during the lectures and I can see why. I couldn't list every video of theirs helped me make this so a big thanks to them! - The communities on sites like Stackoverflow and the unity forums, without whom I wouldn't be able to figure out many of the problems I ran into while making this project. - Archanor for many of the particle effects I used - Ebal Studios for the Star Sparrow Modular Spaceship pack, while I only used the example ships this pack is amazing and the models look great! - 3d.rina for the Sci-fi GUI skin pack, I used it for the health bar and enemie arrows. - Pixel Make, for the Asteroid Pack I used for my Asteroid Prefabs. - Quinn Davis Type, for the [Edge of the Galaxy Font](https://www.fontspace.com/edge-of-the-galaxy-font-f45748) used in this projects UI.


## End

#### I hope you've enjoyed play testing my game and have found it suitable to pass, it has taken me a while to get this finished as I have a very busy fulltime job as a cabinet maker. I'm very proud of what I've put together here and would love to hear any feedback on my first semi big project. Also please forgive me if I haven't formatted this document in the correct way, this is my first time writing a .md file and a text file defending a project of mines complexity.